{% extends "base.html" %}
{% block content %}
<div class="main-wrapper">
  <div class="register-card">
    <h2>Register</h2>
    <form method="post">
      <div class="form-group">
        <label for="role">Register as</label>
        <select id="role" name="role" required onchange="toggleFields()">
          <option value="">Select Role</option>
          <option value="student">Student</option>
          <option value="faculty">Faculty</option>
        </select>
      </div>
      <div class="form-group" id="student-fields" style="display:none;">
        <label for="student_id">Student Register Number</label>
        <input id="student_id" name="student_id" pattern="23KD1A05([0-9]{2}|[A-C][0-9]|[A-C][1-9]|[B-Q][0-9]|[B-Q][1-9])" title="Enter valid register number (e.g., 23KD1A0501, 23KD1A05A1, 23KD1A05B0, ...)" autocomplete="off">
      </div>
      <div class="form-group" id="faculty-fields" style="display:none;">
        <label for="faculty_id">Faculty ID</label>
        <input id="faculty_id" name="faculty_id" pattern="LT[0-9]{4}" title="Faculty ID must start with LT and have 4 digits (e.g., LT1234)" autocomplete="off">
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input id="password" name="password" type="password" required>
      </div>
      <button class="btn-register" type="submit">Register</button>
    </form>
    <p class="register-link">
      Already have an account? <a href="{{ url_for('login') }}">Login here</a>
    </p>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert-error">
          {% for message in messages %}
            {{ message }}
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  </div>
</div>
<script>
function toggleFields() {
  var role = document.getElementById('role').value;
  document.getElementById('student-fields').style.display = role === 'student' ? 'block' : 'none';
  document.getElementById('faculty-fields').style.display = role === 'faculty' ? 'block' : 'none';
}
</script>
{% endblock %}
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
# filepath: f:\kiran vscode\online_exam_platform\app.py
@app.route('/register', methods=['GET', 'POST'])
def register():
    if request.method == 'POST':    # filepath: f:\kiran vscode\online_exam_platform\app.py
    @app.route('/login', methods=['GET', 'POST'])
    def login():
        if request.method == 'POST':
            username = request.form['username']
            password = request.form['password']
            # Add your authentication logic here
            # If successful:
            return redirect(url_for('dashboard'))  # or your main page
        return render_template('login.html')
        username = request.form['username']
        password = request.form['password']
        # Add your user creation logic here
        # If successful:
        return redirect(url_for('login'))
    return render_template('register.html')

@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form['password']
        # Add your authentication logic here
        # If successful:
        return redirect(url_for('dashboard'))  # or your main page
    return render_template('login.html')